---
title: TypeORM docs
---

## Entity.create, save, update, insert, upsert

### Create

用于根据传入的数据创建一个新的实体实例。此方法不会将实体保存到数据库中，而是生成一个新的实体对象。
适用场景：当您需要创建一个新实体并准备好保存到数据库时使用。

## Save

用途：用于保存一个或多个实体到数据库中。如果实体已经存在（根据主键查找），则更新该实体；否则插入一个新实体。
适用场景：当您需要插入或更新实体，并希望触发生命周期钩子时使用。

## Update

用途：用于更新已存在的实体。需要提供实体的主键和要更新的字段。此方法不会执行实体的生命周期钩子。
适用场景：当您只需更新现有实体的特定字段，而不需要触发任何生命周期钩子时使用。

## Insert

用途：用于直接插入一个或多个实体到数据库中。此方法不会检查实体是否存在，并且不会触发生命周期钩子。
适用场景：当您希望直接插入数据，而不需要检查或更新已存在记录时使用。

## Upsert

用途：用于插入或更新实体。如果实体存在（根据主键），则更新；否则插入。upsert 是一个更高级的操作，适用于需要同时处理插入和更新的场景。
适用场景：当您希望确保实体的唯一性，并根据主键进行插入或更新时使用。

## Entity.delete, remove, softdelete, softremove

### Delete

delete 方法是 TypeORM 提供的一个直接删除记录的方法，它会直接从数据库中物理删除数据，不会触发实体上的生命周期钩子（如 beforeRemove 和 afterRemove）。
适用场景：当您不需要保留任何删除记录并希望完全从数据库中移除该数据时使用。

### remove

remove 方法会首先从数据库中查询实体，然后再执行删除操作。与 delete 方法不同的是，remove 会触发实体的生命周期钩子，如 beforeRemove 和 afterRemove。

适用场景：当您需要在删除之前执行一些额外的逻辑（如记录日志、清理资源等）时使用。

### softDelete

softDelete 方法用于软删除，即不会从数据库中物理删除记录，而是将记录标记为已删除（通常是更新一个 deletedAt 字段）。它同样不会触发实体的生命周期钩子。

适用场景：希望在逻辑上删除数据，但仍然保留记录，以便将来恢复或记录审计历史时使用。

### softRemove

softRemove 也是一种软删除方式，与 softDelete 不同，它会先查询实体，然后再将其标记为已删除（通常更新 deletedAt 字段）。同时，它会触发实体的生命周期钩子，如 beforeRemove 和 afterRemove。

适用场景：需要在软删除前执行一些额外的逻辑时使用（例如记录日志、执行清理操作等）。

| 方法         | 删除方式 | 是否触发钩子 | 是否可恢复 | 适用场景                     |
| ------------ | -------- | ------------ | ---------- | ---------------------------- |
| `delete`     | 物理删除 | 否           | 否         | 完全删除数据，数据不可恢复   |
| `remove`     | 物理删除 | 是           | 否         | 物理删除并需要执行钩子逻辑   |
| `softDelete` | 软删除   | 否           | 是         | 软删除数据，不需要钩子       |
| `softRemove` | 软删除   | 是           | 是         | 软删除数据并需要执行钩子逻辑 |
